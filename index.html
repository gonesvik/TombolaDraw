<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="theme-color" content="#006680">
    <meta name="description" content="An application for tombola drawings.">
    <meta name="keywords" content="tombola, raffle, bingo, lotto, virtual drawing machine, sampling without replacement">
    <meta name="author" content="Geir Ove Nesvik">
    <meta name="copyright" content="Copyright (c) 2025 Geir Ove Nesvik">
    <meta name="application-name" content="Tombola Draw">
    <meta name="apple-mobile-web-app-title" content="Tombola Draw">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="msapplication-TileColor" content="#006680" />
    <meta name="msapplication-TileImage" content="images/favicons/favicon-512x512.png" />
         
    <title>Tombola Draw</title>
    <link rel="manifest" href="site.webmanifest">
    <link rel="stylesheet" href="css/tombola.css">
    <!--<link rel="apple-touch-icon" sizes="57x57" href="images/favicons/favicon-57x57.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="60x60" href="images/favicons/favicon-60x60.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="72x72" href="images/favicons/favicon-72x72.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="114x114" href="images/favicons/favicon-114x114.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="120x120" href="images/favicons/favicon-120x120.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="144x144" href="images/favicons/favicon-144x144.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="152x152" href="images/favicons/favicon-152x152.png" type="image/png" />
    <link rel="apple-touch-icon" sizes="180x180" href="images/favicons/favicon-180x180.png" type="image/png" />
    <link rel="icon" sizes="16x16" href="images/favicons/favicon-16x16.png" type="image/png" />
    <link rel="icon" sizes="32x32" href="images/favicons/favicon-32x32.png" type="image/png" />
    <link rel="icon" sizes="96x96" href="images/favicons/favicon-96x96.png" type="image/png" />
    <link rel="icon" sizes="192x192" href="images/favicons/favicon-192x192.png" type="image/png" />
    <link rel="icon" sizes="512x512" href="images/favicons/favicon-512x512.png" type="image/png" />-->
    <link rel="icon" sizes="1024x1024" href="images/tombola_draw_icon2.png" type="image/png" />

    <!-- Font that resembles Cooper Black --
    <link href="https://fonts.googleapis.com/css2?family=Caprasimo:wght@400&display=swap" rel="stylesheet"> -->
</head>

<body id="app-tombola-draw">

    <div id="menu-dropdown-hover">
        <button id="menu-icon" type="submit">&#9776;</button>
        <div id="menu-dropdown-content">
            <div class="menu-line" onclick="document.querySelector('#reset').style.display='block'">Reset</div>
            <div class="menu-line" onclick="document.querySelector('#setSuspensionTime').style.display='block'">Suspension time</div>
            <div class="menu-line" onclick="startReview()" id="review-button">Review ticket register</div>
            <div class="menu-line" onclick="showHelp()" id="help-button"">Help</div>
            <div class="menu-line" onclick="document.querySelector('#about').style.display='block'">About</div>
        </div>
    </div>

    <!-- Ticket registration -->
    
    <div id="registration">
        <div id="watermark"></div>
        <h1 id="page-heading">TICKET REGISTER</h1>
        <p id="read-only" class="w3-card-4">READ ONLY</p>
        <table>
            <thead>
                <tr>
                    <th class="elem-hide">#</th>
                    <th>Color</th>
                    <th>A-Z</th>
                    <th>First</th>
                    <th>Last</th>
                    <th>Number</th>
                    <th class="elem-hide">o</th>
                    <th class="elem-hide">x</th>
                </tr>
            </thead> 

            <tbody>

                <tr aria-label="inputRecord">

                    <td class="item-no">1</td>
                    <td data-label="Color">
                        <select class="select-color" title="color" name="color">
                            <optgroup label="LIGHT">
                                <option class="color-pale-blue" value="color-pale-blue" selected>Pale&nbsp;Blue</option>
                                <option class="color-pale-green" value="color-pale-green">Pale&nbsp;Green</option>
                                <option class="color-pale-red" value="color-pale-red">Pale&nbsp;Red</option>
                                <option class="color-pale-yellow" value="color-pale-yellow">Pale&nbsp;Yellow</option>
                            </optgroup>
                            <optgroup label="FRESH">
                                <option class="color-skybound-blue" value="color-skybound-blue">Skybound&nbsp;Blue</option>
                                <option class="color-meadow-mint" value="color-meadow-mint">Meadow&nbsp;Mint</option>
                                <option class="color-golden-hour-glow" value="color-golden-hour-glow">Golden&nbsp;Hour&nbsp;Glow</option>
                                <option class="color-tangerine-drift" value="color-tangerine-drift">Tangerine&nbsp;Drift</option>
                                <option class="color-rosewood-blush" value="color-rosewood-blush">Rosewood&nbsp;Blush</option>
                            </optgroup>
                            <optgroup label="BOLD">
                                <option class="color-orange" value="color-orange">Orange</option>
                                <option class="color-purple" value="color-purple">Purple</option>
                                <option class="color-teal" value="color-teal">Teal</option>
                                <option class="color-burgundy" value="color-burgundy">Burgundy</option>
                            </optgroup>
                            <optgroup label="MEDAL">
                                <option class="color-bronze" value="color-bronze">Bronze</option>
                                <option class="color-silver" value="color-silver">Silver</option>
                                <option class="color-gold" value="color-gold">Gold</option>
                            </optgroup>
                        </select>
                    </td>

                    <td data-label="A-Z">
                        <select class="select-letter" title="letter" name="letter" id="letterSelect">
                            <option label=""></option>
                        </select>
                    </td>

                    <td data-label="First">
                        <input type="number" class="ticket-number" min=1 max=99999 value=1 step=1 title="first" name="first">
                    </td>

                    <td data-label="Last">
                        <input type="number" class="ticket-number" min=1 max=99999 step=1 title="last" name="last">
                    </td>

                    <td class="num-tickets" data-label="Number">0</td>

                    <td><span class="status-light"></span></td>

                    <td class="cancel-x remove-item">&#10006;</td>
                </tr>
            </tbody>

            <tfoot>
                <tr>
                    <td></td>
                    <td id="totalLabel" colspan="4">Grand total</td>
                    <td id="totalNo">0</td>
                    <td></td>
                    <td></td>
                </tr>
            </tfoot>

        </table>

        <div id="registrationButtons" class="button-row">
            <button id="insert" type="submit" class="button-set hover-effect">INSERT</button>
            <button id="ready" type="submit" class="button-set hover-effect">READY</button>
            <button id="close" type="submit" class="button-set hover-effect">CLOSE</button>
        </div>

    </div>
    
    <!--Presentation of the winner tickets -->

    <div id="present-winner">

        <!-- Winner info -->
        <div id="ticket-text"></div>
        <div id="logItem"></div>
        <div id="repetition">R</div>

        <!-- Icons and commands at the bottom of the app -->
        <div id="ticketButtons" class="button-row">
            <button id="prev" type="submit" class="button-left hover-effect">&#11207;</button>
            <button id="regret" type="submit" class="button-set hover-effect">BACK</button>
            <button id="draw" type="submit" class="button-set hover-effect">DRAW</button>
            <button id="next" type="submit" class="button-right hover-effect">&#11208;</button>
        </div>
    </div>

    <!--Spin the spinner -->
    <section id="spinner-panel" aria-live="polite" aria-label="Spinning color cards">
        <div class="spinner" id="spinner" aria-hidden="false">
            <div class="card one"></div>
            <div class="card two"></div>
            <div class="card three"></div>
            <div class="card four"></div>
        </div>
        <div id="suspensionBar">
            <div id="barFill"></div>
        </div> 
    </section>

    <!-- Error message -->
    <div id="alert" class="w3-modal elem-center">
        <div class="w3-modal-content w3-animate-top w3-card-4">
            <header class="w3-container color-bright-red">
                <span class="w3-button w3-display-topright"
                    onclick="document.getElementById('alert').style.display='none'">&#10006;</span>
                <h2>Error!</h2>
            </header>
            <div class="w3-container">
                <p id="alert-text"></p>
            </div>
        </div>
    </div>

    <!-- Confirmation before resetting the app -->
    <div id="reset" class="w3-modal elem-center">
        <div class="w3-modal-content w3-animate-top w3-card-4">
            <header class="w3-container color-orange">
                <span class="w3-button w3-display-topright"
                    onclick="document.getElementById('reset').style.display='none'">&#10006;</span>
                <h2>Warning!</h2>
            </header>
            <div class="w3-container">
                <p id="reset-warning">This will reset the app.</p>
                <p>Are you sure?</p>
                <button type="submit" class="w3-button w3-button-border" onclick="resetApp()">Yes</button>
                <button type="submit" class="w3-button w3-button-border" onclick="document.getElementById('reset').style.display='none'">No</button>
            </div>
        </div>
    </div>

    <!-- Set the suspension time, i.e. the fake mixing time before the next winner ticket is drawn. -->
    <div id="setSuspensionTime" class="w3-modal elem-center">
        <div class="w3-modal-content w3-animate-top w3-card-4">
            <header class="w3-container color-teal">
                <span class="w3-button w3-display-topright" onclick="resetSuspensionTime();">&#10006;</span>
                <h2><label for="suspension-time">Suspension time</label></h2>
            </header>
            <div class="elem-center">
                <div><span id="rangeValue"></span> s</div>
                <input type="range" min="0" max="10" value="5" step="0.5" class="slider" id="suspension-time" list="tickmarks">
                <datalist id="tickmarks">
                    <!--<option value="0">-->
                    <option value="1">
                    <option value="2">
                    <option value="3">
                    <option value="4">
                    <option value="5">
                    <option value="6">
                    <option value="7">
                    <option value="8">
                    <option value="9">
                </datalist>
            </div>
            <button type="submit" class="w3-button w3-button-border" onclick="setSuspensionTime();">Confirm</button>
        </div>
    </div>

    <!-- Help -->
    <div id="help" class="w3-modal elem-center">
        <div class="w3-modal-content w3-animate-top w3-card-4">
            <header class="w3-container color-bright-blue">
                <span class="w3-button w3-display-topright"
                    onclick="document.getElementById('help').style.display='none'">&#10006;</span>
                <h2>Shortcuts</h2>
            </header>
            <div class="w3-container">
                <div id="help-text">
                    <h3 id="mode-input">Input mode ★</h3>
                    <div><span class="shortcut">Insert</span><span>Insert a new input record</span></div>
                    <div><span class="shortcut">Page Down</span><span>Go to Ready mode</span></div>
                    <h3 id="mode-ready">Ready mode</h3>
                    <div><span class="shortcut">Page Up</span><span>Return to Input mode</span></div>
                    <div><span class="shortcut">Enter</span><span>Draw the first winner</span></div>
                    <div><span class="shortcut">Space</span><span>Same as Enter</span></div>
                    <h3 id="mode-draw">Drawing mode</h3>
                    <div><span class="shortcut">Enter</span><span>Draw a new winner ticket</span></div>
                    <div><span class="shortcut">Space</span><span>Same as Enter</span></div>
                    <div><span class="shortcut">&#9664;</span><span>Show previous ticket</span></div>
                    <div><span class="shortcut">&#9654;</span><span>Show next ticket</span></div>
                    <div><span class="shortcut">Page Up</span><span>Review ticket register</span></div>
                </div>          
            </div>
        </div>
    </div>

    <!-- About the app -->
    <div id="about" class="w3-modal elem-center">
        <div class="w3-modal-content w3-animate-top w3-card-4">
            <header class="w3-container color-bright-blue">
                <span class="w3-button w3-display-topright"
                    onclick="document.getElementById('about').style.display='none'">&#10006;</span>
                <h2>About</h2>
            </header>
            <div class="w3-container">
                <p>
                    Tombola Draw<br/>
                    Version: <span id="version"></span><br/>
                    <span id="author">By G.O. Nesvik</span>
                </p>
                <p>An app for fair ticket drawings.</p>
            </div>
        </div>
    </div>

    <!-- Main script -->
    <script src="js/main.js"></script>
    <script src="js/confetti.browser.min.js"></script>

</body>
</html>
